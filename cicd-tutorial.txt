cicd-tutorial.txt


// -------------------------------------------------------
// CI/CD
//   –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (continuous integration) –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (continuous delivery –∏–ª–∏ continuous deployment) –ü–û
//   DevOps-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã —Å—Ç—Ä–µ–º—è—Ç—Å—è –ø—Ä–∏–º–µ–Ω—è—Ç—å CI/CD –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á

// DevOps (development & operations) ‚Äî –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–±–æ—Ä–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –ü–û
//   https://ru.wikipedia.org/wiki/DevOps

// Docker: –∫–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ñ—É–ª–ª—Å—Ç–µ–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–µ –ø–æ—Å–µ–¥–µ—Ç—å
//   https://habr.com/ru/post/448094/

// Jenkins + Docker + Gitlab + Maven —Å–æ–∑–¥–∞—é—Ç —Å—Ä–µ–¥—É –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—á—Ç–æ-—Ç–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º)
//   https://russianblogs.com/article/5733701255/


// -------------------------------------------------------
// –ü–æ–¥—ä–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –¥–æ–∫–µ—Ä–µ

–ü–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
	https://skillbox.ru/media/base/kak_rabotat_s_docker_upakovka_spring_boot_prilozheniya_v_konteyner/
	
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∫–µ—Ä, –∑–∞–ø—É—Å—Ç–∏—Ç—å.
–°–æ–∑–¥–∞—Ç—å rest –ø—Ä–æ–µ–∫—Ç –≤ –¥–∂–∞–≤–∞, –æ—Ç–∫–æ–º–ø–∏–ª–∏—Ç—å jar –≤ –ø–∞–ø–∫—É
	–ù–∞–ø—Ä–∏–º–µ—Ä –≤ C:\SHESTAKOV\PRG\java\spring\_helloworlds\spring-docker-simple-2\target\spring-docker-simple-0.0.1-SNAPSHOT.jar
	
–°–æ–∑–¥–∞—Ç—å –¥–æ–∫–µ—Ä —Ñ–∞–π–ª
	C:\SHESTAKOV\PRG\java\spring\_helloworlds\spring-docker-simple-2\Dockerfile
	
	// Dockerfile
	FROM openjdk:17-jdk-slim
	ARG JAR_FILE=target/spring-docker-simple-0.0.1-SNAPSHOT.jar
	WORKDIR /opt/app
	COPY ${JAR_FILE} app.jar
	ENTRYPOINT ["java","-jar","app.jar"]
	
	// –î–ª—è 11 Java
	FROM adoptopenjdk/openjdk11:alpine-jre
	
	// –î–ª—è 17 java
	FROM openjdk:17-jdk-slim
	
–°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –¥–æ–∫–µ—Ä–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
	–∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ - C:\SHESTAKOV\PRG\java\spring\_helloworlds\spring-docker-simple-2
	docker build -t spring-docker-simple:0.0.1 .
	
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±—Ä–∞–∑ —Å–æ–∑–¥–∞–Ω –∫–æ–º–∞–Ω–¥–æ–π 
	docker images
	
	REPOSITORY             TAG       IMAGE ID       CREATED        SIZE
	spring-docker-simple   0.0.1     892b60ee2399   19 hours ago   428MB
	
–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
	docker run -d -p 8080:8080 -t spring-docker-simple:0.0.1
	
	bd51ddb225ef61a9a4351e43b2e51e66fbc249601dd342efae8458960c79ea5d

–ü—Ä–æ–≤–µ—Ä–∏–º —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
	curl http://localhost:8080 
	Hello, Docker!
	
–ò–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
	
–°–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
	docker ps
	
	CONTAINER ID   IMAGE                        COMMAND               CREATED         STATUS         PORTS                    NAMES
	6507ec95db47   spring-docker-simple:0.0.1   "java -jar app.jar"   2 minutes ago   Up 2 minutes   0.0.0.0:8080->8080/tcp   naughty_hugle

C–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤ 
	docker images
	
	REPOSITORY             TAG       IMAGE ID       CREATED        SIZE
	spring-docker-simple   0.0.1     892b60ee2399   19 hours ago   428MB

–≤—ã–≤–µ—Å—Ç–∏ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
	docker logs
	docker logs 6507ec95db47 > out.log
	
	  .   ____          _            __ _ _
	 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
	( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
	 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
	  '  |____| .__|_| |_|_| |_\__, | / / / /
	 =========|_|==============|___/=/_/_/_/
	[32m :: Spring Boot :: [39m              [2m (v3.2.8)[0;39m

	[2m2024-08-15T11:43:37.136Z[0;39m [32m INFO[0;39m [35m1[0;39m [2m---[0;39m [2m[spring-docker-simple] [           main][0;39m [2m[0;39m[36mc.e.s.SpringDockerSimpleApplication     [0;39m [2m:[0;39m Starting SpringDockerSimpleApplication v0.0.1-SNAPSHOT using Java 17.0.2 with PID 1 (/opt/app/app.jar started by root in /opt/app)
	...
	[2m2024-08-15T11:44:55.867Z[0;39m [32m INFO[0;39m [35m1[0;39m [2m---[0;39m [2m[spring-docker-simple] [nio-8080-exec-1][0;39m [2m[0;39m[36mo.s.web.servlet.DispatcherServlet       [0;39m [2m:[0;39m Completed initialization in 1 ms

docker stop 
	// –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. 
	
docker ps -a -q
	// –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. - $(docker ps -a -q)
	
	docker ps -a -q
	6507ec95db47
	
	docker stop $(docker ps -a -q)
	–ù–µ –ø–æ–º–æ–≥–ª–æ
	
// -------------------------------------------------------

